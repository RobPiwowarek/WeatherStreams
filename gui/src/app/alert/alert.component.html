<div class="ui-g-12">
<div class="ui-g-1"></div>
<div class="ui-g-10">
	<h3 style="text-align:center">{{username}} alerts</h3>
	<p-table [columns]="cols" [value]="alerts" selectionMode="single" [(selection)]="selectedAlert" (onRowSelect)="onRowSelect($event)" [paginator]="true" [rows]="15">
	    <ng-template pTemplate="header" let-columns>
	        <tr>
	            <th *ngFor="let col of columns" [pSortableColumn]="col.field">
	                {{col.header}}
	                <p-sortIcon [field]="col.field"></p-sortIcon>
	            </th>
	        </tr>
	    </ng-template>
	    <ng-template pTemplate="body" let-rowData let-columns="columns">
	        <tr [pSelectableRow]="rowData">
	            <td *ngFor="let col of columns">
	                {{rowData[col.field]}}
	            </td>
	        </tr>
	    </ng-template>
	     
	</p-table>
</div>
</div>

<p-dialog header="History" [(visible)]="displayDialog" [responsive]="true" [modal]="true" [width]="500">
    <div class="ui-g ui-fluid" *ngIf=alert>
        <div class="ui-g-12">
            <div class="ui-g-4">
                <label for="name">Name</label>
            </div>
            <div class="ui-g-8">
            	<label >{{alert.name}}</label>
            </div>
        </div>
        <div class="ui-g-12">
            <div class="ui-g-4">
                <label for="location">Location</label>
            </div>
            <div class="ui-g-8">
                <label >{{alert.location}}</label>
            </div>
        </div>
        <div class="ui-g-12">
            <div class="ui-g-4">
                <label for="date">Date</label>
            </div>
            <div class="ui-g-8">
                <label >{{alert.date}}</label>
            </div>
        </div>
    
        <div class="ui-g-12">
             <div class="ui-g-12">
             	<p-table [value]="alertHistoryParams">
				    <ng-template pTemplate="header">
				        <tr>
				            <th style="width: 26%" >Name</th>
				            <th style="width: 17%" >Value</th>
				            <th style="width: 17%" >Limit</th>
				            <th style="width: 15%" >Unit</th>
				            <th style="width: 25%" >Out of limit</th>
				        </tr>
				    </ng-template>
				    <ng-template pTemplate="body" let-rowData>
				        <tr [ngClass]="rowData.outOfLimit ? 'out-of-limit' : null" >
				            <td >
								{{rowData.name}}
				            </td>
				            <td >
								{{rowData.value}}
				            </td>
							<td >
								{{rowData.limit}}
				            </td>
				            <td >
								{{rowData.unit}}
				            </td>
				            <td>
								{{rowData.outOfLimit}}
				            </td>
				        </tr>
				    </ng-template>
				</p-table>
             	<p> <br/> </p>
             </div>
         </div>
    </div>
    <p-footer>
        <div class="ui-dialog-buttonpane ui-helper-clearfix">
            <button type="button" pButton icon="fa-close" (click)="delete()" label="Delete Alert"></button>
        </div>
    </p-footer>
   
</p-dialog>

